!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("strings",[],t):"object"==typeof exports?exports.strings=t():e.strings=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(){r(this,e)}return o(e,null,[{key:"frequenciesToCents",value:function(e,t){return 0===e?0:Math.log(t/e)/Math.log(2)*1200}},{key:"frequencyToCents",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:440;return e.frequenciesToCents(n,t)+900}},{key:"centsToFrequency",value:function(e,t){return t*Math.pow(2,e/1200)}},{key:"centsToStringLength",value:function(e){return 1/Math.pow(2,e/1200)}},{key:"frequencyToStringLength",value:function(e,t){if(0===e)throw new Error("Invalid frequency: "+e);var n=this.frequenciesToCents(t,e);return this.centsToStringLength(n)}}]),e}();t.default=i,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Note=t.Instrument=t.HarmonicCalculator=t.Harmonic=void 0;var o=n(2),i=r(o),a=n(4),u=r(a),f=n(5),c=r(f),l=n(3),s=r(l);t.Harmonic=i.default,t.HarmonicCalculator=u.default,t.Instrument=c.default,t.Note=s.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return 0===t?e:o(t,e%t)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),u=function(e){return e&&e.__esModule?e:{default:e}}(a),f=function(){function e(t,n,o){if(r(this,e),t>n)throw new Error("The half-stop cannot be lower than the base stop.");this.halfStop=parseFloat(t),this.baseStop=parseFloat(n),this.stringFrequency=o}return i(e,[{key:"number",get:function(){var e=Math.round(1/o(1,this.halfStop/this.baseStop));return Object.defineProperty(this,"number",{value:e,writable:!1}),e}},{key:"isNatural",get:function(){return 1===this.baseStop}},{key:"frequency",get:function(){return e.getSoundingFrequency(this.number,this.baseStop,this.stringFrequency)}}],[{key:"getSoundingFrequency",value:function(e,t,n){var r=u.default.frequenciesToCents(t,1);return u.default.centsToFrequency(r,n)*e}},{key:"getStringLengthsFromNumber",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=1;r<=e;r++)t&&1!==r&&1!==o(r,e)||n.push(r/e);return n}},{key:"getSeries",value:function(e){for(var t=[],n=0,r=1;r<=e;r++)n=t[r]=n+1/r;return t}}]),e}();t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var a,u,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(l),h=(a={},i(a,"",""),i(a,"([♭fb]|flat)","♭"),i(a,"([♯s#]|sharp)","♯"),i(a,"(-|(quarter|¼|1/4)[ -]?([♭fb]|flat))","¼♭"),i(a,"(\\+|(quarter|¼|1/4)[ -]?([♯s#]|sharp))","¼♯"),i(a,"(𝄫|bb|double[ -]([♭fb]|flat))","♭♭"),i(a,"(𝄪|♯♯|##|double[ -]([♯s#]|sharp))","x"),i(a,"(([♭fb]|flat)-|((three|3)[ -]quarter|¾|3/4)[ -]?([♭fb]|flat))","¾♭"),i(a,"(([♯s#]|sharp)\\+|((three|3)[ -]quarter|¾|3/4)[ -]?([♯s#]|sharp))","¾♯"),a),v=function(e){e=e.trim();for(var t in h){var n=h[t];if(e===n||new RegExp("^"+t+"$","iu").test(e))return n}throw new Error("Invalid accidental: "+e)},d=(u={},i(u,"",0),i(u,"♭",-100),i(u,"♯",-100),i(u,"¼♭",-50),i(u,"¼♯",50),i(u,"♭♭",-200),i(u,"x",200),i(u,"¾♭",-150),i(u,"¾♯",150),u),y={C:0,D:200,E:400,F:500,G:700,A:900,B:1100},p=["","♯","♭","¼♯","¼♭","x","♭♭","¾♭","¾♯"],g=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(o(this,e),r>1e3)throw new Error("Invalid octave: "+r);this.name=t,this.accidental=n,this.octave=parseInt(r,10),this.difference=parseFloat(i)}return c(e,[{key:"toString",value:function(){var e=this.name+this.accidental+this.octave,t=Math.round(this.difference);return 0!==t&&(e+=" "+(t>0?"+":"")+Math.round(this.difference)+"¢"),e}},{key:"getFrequency",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:440;return s.default.centsToFrequency(this.cents-900,e)}},{key:"cents",get:function(){return y[this.name]+d[this.accidental]+1200*(this.octave-4)+this.difference}}],[{key:"fromCents",value:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=parseInt(50*Math.round(t/50),10),i=t-o,a=Math.floor(o/1200)+4,u=o-1200*(a-4),c=Object.keys(y),l=[].concat(r(n),p),s=0;s<l.length;s++){var h=function(){var t=l[s],n=u-d[t],r=c.find(function(e){return y[e]===n});if(void 0!==r)return{v:new e(r,t,a,i)}}();if("object"===(void 0===h?"undefined":f(h)))return h.v}throw new Error("Failed to find note name for cents: "+t)}},{key:"fromFrequency",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:440,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.fromCents(s.default.frequencyToCents(t,n),r)}},{key:"fromName",value:function(t){var n=t,r=n.match(/^[a-g]/i);if(null===r)throw new Error("Invalid note name: "+t);var o=r[0].toUpperCase();if(n=t.substr(r[0].length),n.match(/^\-[0-9]+$/i))throw new Error("Ambiguous note: "+t+' (does "-" mean a quarter-flat or a negative?)');r=n.match(new RegExp("/?(-?[0-9]+)?( ([+-][0-9]+)[c¢])?$","iu"));var i=r,a=i[1],u=void 0===a?4:a,f=i[3],c=void 0===f?0:f;return n=n.substr(0,n.length-r[0].length),new e(o,v(n),u,c)}}]),e}();t.default=g,e.exports=t.default},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){return(e.baseStop-e.halfStop)*t.stringLength}function a(e,t){return e.halfStop*t.stringLength}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(0),c=function(e){return e&&e.__esModule?e:{default:e}}(f),l=n(1),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.minStopDistance,r=void 0===n?1:n,i=t.maxStopDistance,a=void 0===i?120:i,u=t.minBowedDistance,f=void 0===u?20:u,c=t.maxSoundingNoteDifference,l=void 0===c?50:c;o(this,e),this.minStopDistance=r,this.maxStopDistance=a,this.minBowedDistance=f,this.maxSoundingNoteDifference=l}return u(e,[{key:"findArtificialHarmonics",value:function(e,t){for(var n=[],r=e.getFrequency(),o=6;o>=2;o--){var i=r/o;if(i>t){var a=c.default.frequencyToStringLength(i,t),u=(o-1)/o,f=u*a;n.push(new l.Harmonic(f,a,t))}}return n}},{key:"findNaturalHarmonics",value:function(e,t){for(var n=[],r=1;r<=8;r++){var o=l.Harmonic.getSoundingFrequency(1,1/r,t);if(Math.abs(c.default.frequencyToCents(o)-e.cents)<=this.maxSoundingNoteDifference){var i=!0,a=!1,u=void 0;try{for(var f,s=l.Harmonic.getStringLengthsFromNumber(r,!0)[Symbol.iterator]();!(i=(f=s.next()).done);i=!0){var h=f.value;n.push(new l.Harmonic(h,1,t))}}catch(e){a=!0,u=e}finally{try{!i&&s.return&&s.return()}finally{if(a)throw u}}}}return n}},{key:"validatePhysicalDistance",value:function(e,t){if(!e.isNatural){var n=i(e,t);if(n<this.minStopDistance||n>this.maxStopDistance)return!1}return a(e,t)>=this.minBowedDistance}},{key:"findHarmonics",value:function(e,t){var n=this,o=[],i=!0,a=!1,u=void 0;try{for(var f,c=t.stringFrequencies[Symbol.iterator]();!(i=(f=c.next()).done);i=!0){var l,s=f.value;(l=o).push.apply(l,r(this.findArtificialHarmonics(e,s)).concat(r(this.findNaturalHarmonics(e,s))))}}catch(e){a=!0,u=e}finally{try{!i&&c.return&&c.return()}finally{if(a)throw u}}return o=o.filter(function(e){return n.validatePhysicalDistance(e,t)})}}]),e}();t.default=s,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.presets=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=n(1),a=t.presets={violin:{names:["E5","A4","D4","G3"],length:325},viola:{names:["A4","D4","G3","C3"],length:410},cello:{names:["A3","D3","G2","C2"],length:690},"double bass":{names:["G2","D2","A1","E1"],length:1140}},u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;r(this,e),this.stringFrequencies=t,this.stringLength=n}return o(e,null,[{key:"fromNames",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=[],r=!0,o=!1,a=void 0;try{for(var u,f=e[Symbol.iterator]();!(r=(u=f.next()).done);r=!0){var c=u.value;n.push(i.Note.fromName(c).getFrequency())}}catch(e){o=!0,a=e}finally{try{!r&&f.return&&f.return()}finally{if(o)throw a}}return new this(n,t)}},{key:"fromPreset",value:function(e){if(void 0===a[e])throw new Error("Preset not found: "+e);return this.fromNames(a[e].names,a[e].length)}}]),e}();t.default=u}])});